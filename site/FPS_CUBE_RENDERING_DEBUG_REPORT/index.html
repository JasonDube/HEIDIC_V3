<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Complete documentation for the HEIDIC programming language and EDEN Engine ecosystem"><meta name=author content="HEIDIC Project"><link href=https://heidic.dev/FPS_CUBE_RENDERING_DEBUG_REPORT/ rel=canonical><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>FPS Camera Cube Rendering Issue - Debug Report - HEIDIC Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../public-docs/stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#fps-camera-cube-rendering-issue-debug-report class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="HEIDIC Documentation" class="md-header__button md-logo" aria-label="HEIDIC Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> HEIDIC Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> FPS Camera Cube Rendering Issue - Debug Report </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/yourusername/heidic title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> HEIDIC </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../FEATURES/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=../EXAMPLES/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../HEIDIC/INTRODUCTION/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../HEIDIC/LANGUAGE/ class=md-tabs__link> Language Reference </a> </li> <li class=md-tabs__item> <a href=../ECS/ECS_QUERIES_EXPLAINED/ class=md-tabs__link> ECS & Components </a> </li> <li class=md-tabs__item> <a href=../CONTINUUM-HOT%20RELOAD%20DOCS/HOT_RELOADING_EXPLAINED/ class=md-tabs__link> Engine Features </a> </li> <li class=md-tabs__item> <a href=../HEIDIC/HEIROC_ARCHITECTURE/ class=md-tabs__link> Tools & Ecosystem </a> </li> <li class=md-tabs__item> <a href=../DDS_FORMAT_GUIDE/ class=md-tabs__link> Resources & Formats </a> </li> <li class=md-tabs__item> <a href=../KNOWLEDGE%20BASE/shaders_explained/ class=md-tabs__link> Knowledge Base </a> </li> <li class=md-tabs__item> <a href=../HEIDIC/HEIDIC_ROADMAP/ class=md-tabs__link> Development </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="HEIDIC Documentation" class="md-nav__button md-logo" aria-label="HEIDIC Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> HEIDIC Documentation </label> <div class=md-nav__source> <a href=https://github.com/yourusername/heidic title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> HEIDIC </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../FEATURES/ class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=../EXAMPLES/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../HEIDIC/INTRODUCTION/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../EDEN_VS_HEIDIC/ class=md-nav__link> <span class=md-ellipsis> EDEN vs HEIDIC </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Language Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Language Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../HEIDIC/LANGUAGE/ class=md-nav__link> <span class=md-ellipsis> Language Specification </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/LANGUAGE_REFERENCE/ class=md-nav__link> <span class=md-ellipsis> Complete Reference </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/ERROR_TYPES/ class=md-nav__link> <span class=md-ellipsis> Error Types </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/HEIDIC_VS_CPP/ class=md-nav__link> <span class=md-ellipsis> HEIDIC vs C++ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> ECS & Components </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> ECS & Components </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ECS/ECS_QUERIES_EXPLAINED/ class=md-nav__link> <span class=md-ellipsis> ECS Queries Explained </span> </a> </li> <li class=md-nav__item> <a href=../ECS/COMPONENT_FRAMEWORK_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Component Framework </span> </a> </li> <li class=md-nav__item> <a href=../SOA%20DOCS/SOA_ACCESS_PATTERN_EXPLAINED/ class=md-nav__link> <span class=md-ellipsis> SOA Access Pattern </span> </a> </li> <li class=md-nav__item> <a href=../ECS/ENTITY_SYSTEM_ANALYSIS/ class=md-nav__link> <span class=md-ellipsis> Entity System Analysis </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Engine Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Engine Features </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1 id=__nav_7_1_label tabindex=0> <span class=md-ellipsis> CONTINUUM Hot-Reload </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> CONTINUUM Hot-Reload </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../CONTINUUM-HOT%20RELOAD%20DOCS/HOT_RELOADING_EXPLAINED/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../CONTINUUM-HOT%20RELOAD%20DOCS/CONTINUUM/ class=md-nav__link> <span class=md-ellipsis> CONTINUUM System </span> </a> </li> <li class=md-nav__item> <a href=../CONTINUUM-HOT%20RELOAD%20DOCS/component_hotload_explained/ class=md-nav__link> <span class=md-ellipsis> Component Hot-Load </span> </a> </li> <li class=md-nav__item> <a href=../CONTINUUM-HOT%20RELOAD%20DOCS/HOT_RELOAD_IMPLEMENTATION_STATUS/ class=md-nav__link> <span class=md-ellipsis> Implementation Status </span> </a> </li> <li class=md-nav__item> <a href=../CONTINUUM-HOT%20RELOAD%20DOCS/HOT_RELOAD_TESTING/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Tools & Ecosystem </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Tools & Ecosystem </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../HEIDIC/HEIROC_ARCHITECTURE/ class=md-nav__link> <span class=md-ellipsis> HEIROC Scripting </span> </a> </li> <li class=md-nav__item> <a href="../Electroscribe, ESE, and NEUROSHELL docs are in their respective directories" class=md-nav__link> <span class=md-ellipsis> Note </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Resources & Formats </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Resources & Formats </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../DDS_FORMAT_GUIDE/ class=md-nav__link> <span class=md-ellipsis> DDS Format Guide </span> </a> </li> <li class=md-nav__item> <a href=../DDS_TEXTURE_STRATEGY/ class=md-nav__link> <span class=md-ellipsis> DDS Texture Strategy </span> </a> </li> <li class=md-nav__item> <a href=../RESOURCE_SYSTEM_PLAN/ class=md-nav__link> <span class=md-ellipsis> Resource System Plan </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Knowledge Base </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Knowledge Base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../KNOWLEDGE%20BASE/shaders_explained/ class=md-nav__link> <span class=md-ellipsis> Shaders Explained </span> </a> </li> <li class=md-nav__item> <a href=../KNOWLEDGE%20BASE/stage_field_explanation/ class=md-nav__link> <span class=md-ellipsis> Stage Field Explanation </span> </a> </li> <li class=md-nav__item> <a href=../ZERO%20BOILERPLATE/ZERO_BOILERPLATE_EXPLAINED/ class=md-nav__link> <span class=md-ellipsis> Zero Boilerplate </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11 id=__nav_11_label tabindex=0> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../HEIDIC/HEIDIC_ROADMAP/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/SPRINT1_IMPLEMENTATION_PLAN/ class=md-nav__link> <span class=md-ellipsis> Sprint 1 Plan </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11_3> <label class=md-nav__link for=__nav_11_3 id=__nav_11_3_label tabindex=0> <span class=md-ellipsis> Implementation Plans </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_3_label aria-expanded=false> <label class=md-nav__title for=__nav_11_3> <span class="md-nav__icon md-icon"></span> Implementation Plans </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../SOA%20DOCS/SOA_IMPLEMENTATION_PLAN/ class=md-nav__link> <span class=md-ellipsis> SOA Implementation </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/CUDA_OPTIX_INTEROP_IMPLEMENTATION/ class=md-nav__link> <span class=md-ellipsis> CUDA/OptiX Interop </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/PATTERN_MATCHING_IMPLEMENTATION/ class=md-nav__link> <span class=md-ellipsis> Pattern Matching </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/TYPE_INFERENCE_IMPLEMENTATION/ class=md-nav__link> <span class=md-ellipsis> Type Inference </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/MEMORY_OWNERSHIP_IMPLEMENTATION/ class=md-nav__link> <span class=md-ellipsis> Memory Ownership </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/STRING_HANDLING_IMPLEMENTATION/ class=md-nav__link> <span class=md-ellipsis> String Handling </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/OPTIONAL_TYPES_IMPLEMENTATION/ class=md-nav__link> <span class=md-ellipsis> Optional Types </span> </a> </li> <li class=md-nav__item> <a href=../HEIDIC/DEFER_STATEMENTS_IMPLEMENTATION/ class=md-nav__link> <span class=md-ellipsis> Defer Statements </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../LLM%20TAKES/REVIEWS_SUMMARY/ class=md-nav__link> <span class=md-ellipsis> LLM Reviews </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#problem-summary class=md-nav__link> <span class=md-ellipsis> Problem Summary </span> </a> </li> <li class=md-nav__item> <a href=#what-works class=md-nav__link> <span class=md-ellipsis> What Works </span> </a> </li> <li class=md-nav__item> <a href=#what-doesnt-work class=md-nav__link> <span class=md-ellipsis> What Doesn't Work </span> </a> </li> <li class=md-nav__item> <a href=#attempted-fixes-all-failed class=md-nav__link> <span class=md-ellipsis> Attempted Fixes (All Failed) </span> </a> </li> <li class=md-nav__item> <a href=#key-files class=md-nav__link> <span class=md-ellipsis> Key Files </span> </a> <nav class=md-nav aria-label="Key Files"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#main-rendering-code class=md-nav__link> <span class=md-ellipsis> Main Rendering Code </span> </a> </li> <li class=md-nav__item> <a href=#vertexindex-data class=md-nav__link> <span class=md-ellipsis> Vertex/Index Data </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#current-code-state class=md-nav__link> <span class=md-ellipsis> Current Code State </span> </a> <nav class=md-nav aria-label="Current Code State"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#fps-render-function-heidic_render_fps class=md-nav__link> <span class=md-ellipsis> FPS Render Function (heidic_render_fps) </span> </a> </li> <li class=md-nav__item> <a href=#working-spinning-cube-render-function-heidic_render_frame_cube class=md-nav__link> <span class=md-ellipsis> Working Spinning Cube Render Function (heidic_render_frame_cube) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#key-differences-between-working-and-broken-code class=md-nav__link> <span class=md-ellipsis> Key Differences Between Working and Broken Code </span> </a> <nav class=md-nav aria-label="Key Differences Between Working and Broken Code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#differences-found class=md-nav__link> <span class=md-ellipsis> Differences Found: </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#pipeline-configuration class=md-nav__link> <span class=md-ellipsis> Pipeline Configuration </span> </a> </li> <li class=md-nav__item> <a href=#uniform-buffer-object-structure class=md-nav__link> <span class=md-ellipsis> Uniform Buffer Object Structure </span> </a> </li> <li class=md-nav__item> <a href=#mat4-helper-functions class=md-nav__link> <span class=md-ellipsis> Mat4 Helper Functions </span> </a> </li> <li class=md-nav__item> <a href=#observations class=md-nav__link> <span class=md-ellipsis> Observations </span> </a> </li> <li class=md-nav__item> <a href=#hypotheses class=md-nav__link> <span class=md-ellipsis> Hypotheses </span> </a> </li> <li class=md-nav__item> <a href=#debugging-suggestions class=md-nav__link> <span class=md-ellipsis> Debugging Suggestions </span> </a> </li> <li class=md-nav__item> <a href=#files-to-examine class=md-nav__link> <span class=md-ellipsis> Files to Examine </span> </a> </li> <li class=md-nav__item> <a href=#environment class=md-nav__link> <span class=md-ellipsis> Environment </span> </a> </li> <li class=md-nav__item> <a href=#next-steps-for-debugging class=md-nav__link> <span class=md-ellipsis> Next Steps for Debugging </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=fps-camera-cube-rendering-issue-debug-report>FPS Camera Cube Rendering Issue - Debug Report<a class=headerlink href=#fps-camera-cube-rendering-issue-debug-report title="Permanent link">&para;</a></h1> <h2 id=problem-summary>Problem Summary<a class=headerlink href=#problem-summary title="Permanent link">&para;</a></h2> <p>The FPS camera test project renders a cube that appears as a "flat z-fighting jumbled mess" instead of a proper 3D cube. The cube vertices and indices are correct (identical to the working spinning cube example), but the rendering is broken.</p> <h2 id=what-works>What Works<a class=headerlink href=#what-works title="Permanent link">&para;</a></h2> <ul> <li><strong>Spinning Cube Example</strong>: Renders correctly with proper 3D depth and faces</li> <li><strong>FPS Camera Controls</strong>: Mouse look and WASD movement work correctly</li> <li><strong>Pipeline Creation</strong>: Both FPS and cube pipelines are created successfully</li> <li><strong>Buffer Creation</strong>: Vertex and index buffers are created with correct data</li> </ul> <h2 id=what-doesnt-work>What Doesn't Work<a class=headerlink href=#what-doesnt-work title="Permanent link">&para;</a></h2> <ul> <li><strong>FPS Cube Rendering</strong>: Cube appears as flat faces with z-fighting, all faces appear to be at the same depth</li> <li><strong>Both Pipelines</strong>: Issue persists whether using <code>g_fpsPipeline</code> or <code>g_cubePipeline</code></li> <li><strong>All Cube Sizes</strong>: Issue occurs with 2x2x2 cube, 5x5x5 cube, and flat floor cube (20x1x20)</li> </ul> <h2 id=attempted-fixes-all-failed>Attempted Fixes (All Failed)<a class=headerlink href=#attempted-fixes-all-failed title="Permanent link">&para;</a></h2> <ol> <li>✅ Used exact same vertices/indices as spinning cube</li> <li>✅ Used exact same matrices (model/view/projection) as spinning cube</li> <li>✅ Used exact same uniform buffer update code</li> <li>✅ Used same pipeline (g_cubePipeline) instead of g_fpsPipeline</li> <li>✅ Used same buffers (g_cubeVertexBuffer) instead of FPS-specific buffers</li> <li>✅ Fixed Mat4 conversion (tried both direct assignment and .data access)</li> <li>✅ Verified depth buffer is enabled and cleared</li> <li>✅ Verified depth stencil state matches spinning cube</li> <li>✅ Disabled face culling (no change)</li> <li>✅ Tried identity matrix, scaled matrices, rotated matrices (all fail)</li> </ol> <h2 id=key-files>Key Files<a class=headerlink href=#key-files title="Permanent link">&para;</a></h2> <h3 id=main-rendering-code>Main Rendering Code<a class=headerlink href=#main-rendering-code title="Permanent link">&para;</a></h3> <ul> <li><strong>File</strong>: <code>vulkan/eden_vulkan_helpers.cpp</code></li> <li><strong>FPS Render Function</strong>: <code>heidic_render_fps()</code> starting at line ~2313</li> <li><strong>Spinning Cube Render Function</strong>: <code>heidic_render_frame_cube()</code> starting at line ~1884</li> <li><strong>FPS Pipeline Creation</strong>: <code>heidic_init_renderer_fps()</code> starting at line ~2077</li> <li><strong>Cube Pipeline Creation</strong>: <code>heidic_init_renderer_cube()</code> starting at line ~1675</li> </ul> <h3 id=vertexindex-data>Vertex/Index Data<a class=headerlink href=#vertexindex-data title="Permanent link">&para;</a></h3> <ul> <li><strong>Cube Vertices</strong>: <code>cubeVertices</code> at line ~1652 (8 vertices, -1.0 to 1.0 range)</li> <li><strong>Cube Indices</strong>: <code>cubeIndices</code> at line ~1665 (36 indices, 12 triangles)</li> <li><strong>FPS Floor Cube Vertices</strong>: <code>floorCubeVertices</code> at line ~2056 (identical to cubeVertices)</li> <li><strong>FPS Floor Cube Indices</strong>: <code>floorCubeIndices</code> at line ~2067 (identical to cubeIndices)</li> </ul> <h2 id=current-code-state>Current Code State<a class=headerlink href=#current-code-state title="Permanent link">&para;</a></h2> <h3 id=fps-render-function-heidic_render_fps>FPS Render Function (heidic_render_fps)<a class=headerlink href=#fps-render-function-heidic_render_fps title="Permanent link">&para;</a></h3> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1>// Line ~2313</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=k>extern</span><span class=w> </span><span class=s>&quot;C&quot;</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>heidic_render_fps</span><span class=p>(</span><span class=n>GLFWwindow</span><span class=o>*</span><span class=w> </span><span class=n>window</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>camera_pos_x</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>camera_pos_y</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>camera_pos_z</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>camera_yaw</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>camera_pitch</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>g_device</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>VK_NULL_HANDLE</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>g_swapchain</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>VK_NULL_HANDLE</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>    </span><span class=c1>// Use FPS pipeline if available, otherwise use cube pipeline</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>    </span><span class=n>VkPipeline</span><span class=w> </span><span class=n>pipelineToUse</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>g_fpsPipeline</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>VK_NULL_HANDLE</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>g_fpsPipeline</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>g_cubePipeline</span><span class=p>;</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pipelineToUse</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>VK_NULL_HANDLE</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>cerr</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;[FPS] ERROR: No pipeline available!&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=w>    </span><span class=c1>// ... standard Vulkan frame setup (wait, acquire image, reset command buffer) ...</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=w>    </span><span class=c1>// Begin render pass</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=w>    </span><span class=n>VkRenderPassBeginInfo</span><span class=w> </span><span class=n>renderPassInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=w>    </span><span class=n>renderPassInfo</span><span class=p>.</span><span class=n>sType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO</span><span class=p>;</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=w>    </span><span class=n>renderPassInfo</span><span class=p>.</span><span class=n>renderPass</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g_renderPass</span><span class=p>;</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=w>    </span><span class=n>renderPassInfo</span><span class=p>.</span><span class=n>framebuffer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g_framebuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>];</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=w>    </span><span class=n>renderPassInfo</span><span class=p>.</span><span class=n>renderArea</span><span class=p>.</span><span class=n>offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>};</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=w>    </span><span class=n>renderPassInfo</span><span class=p>.</span><span class=n>renderArea</span><span class=p>.</span><span class=n>extent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>g_swapchainExtent</span><span class=p>;</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>array</span><span class=o>&lt;</span><span class=n>VkClearValue</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=o>&gt;</span><span class=w> </span><span class=n>clearValues</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a><span class=w>    </span><span class=n>clearValues</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{{</span><span class=mf>0.1f</span><span class=p>,</span><span class=w> </span><span class=mf>0.1f</span><span class=p>,</span><span class=w> </span><span class=mf>0.15f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>}};</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a><span class=w>    </span><span class=n>clearValues</span><span class=p>[</span><span class=mi>1</span><span class=p>].</span><span class=n>depthStencil</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>};</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a><span class=w>    </span><span class=n>renderPassInfo</span><span class=p>.</span><span class=n>clearValueCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>static_cast</span><span class=o>&lt;</span><span class=kt>uint32_t</span><span class=o>&gt;</span><span class=p>(</span><span class=n>clearValues</span><span class=p>.</span><span class=n>size</span><span class=p>());</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a><span class=w>    </span><span class=n>renderPassInfo</span><span class=p>.</span><span class=n>pClearValues</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clearValues</span><span class=p>.</span><span class=n>data</span><span class=p>();</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a><span class=w>    </span><span class=n>vkCmdBeginRenderPass</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>renderPassInfo</span><span class=p>,</span><span class=w> </span><span class=n>VK_SUBPASS_CONTENTS_INLINE</span><span class=p>);</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a><span class=w>    </span><span class=c1>// Bind pipeline</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a><span class=w>    </span><span class=n>vkCmdBindPipeline</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=n>VK_PIPELINE_BIND_POINT_GRAPHICS</span><span class=p>,</span><span class=w> </span><span class=n>pipelineToUse</span><span class=p>);</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a><span class=w>    </span><span class=c1>// Update uniform buffer</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a><span class=w>    </span><span class=n>UniformBufferObject</span><span class=w> </span><span class=n>ubo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a><span class=w>    </span><span class=c1>// Model matrix - identity (no transform)</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a><span class=w>    </span><span class=n>ubo</span><span class=p>.</span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>mat4</span><span class=p>(</span><span class=mf>1.0f</span><span class=p>);</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a><span class=w>    </span><span class=c1>// View matrix - calculate from camera position, yaw, and pitch</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>yaw_rad</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>camera_yaw</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>3.14159f</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>180.0f</span><span class=p>;</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>pitch_rad</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>camera_pitch</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>3.14159f</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>180.0f</span><span class=p>;</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a><span class=w>    </span><span class=n>glm</span><span class=o>::</span><span class=n>vec3</span><span class=w> </span><span class=nf>forward</span><span class=p>(</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a><span class=w>        </span><span class=n>sinf</span><span class=p>(</span><span class=n>yaw_rad</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>cosf</span><span class=p>(</span><span class=n>pitch_rad</span><span class=p>),</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a><span class=w>        </span><span class=o>-</span><span class=n>sinf</span><span class=p>(</span><span class=n>pitch_rad</span><span class=p>),</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a><span class=w>        </span><span class=o>-</span><span class=n>cosf</span><span class=p>(</span><span class=n>yaw_rad</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>cosf</span><span class=p>(</span><span class=n>pitch_rad</span><span class=p>)</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a><span class=w>    </span><span class=p>);</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a><span class=w>    </span><span class=n>forward</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>normalize</span><span class=p>(</span><span class=n>forward</span><span class=p>);</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a><span class=w>    </span><span class=n>glm</span><span class=o>::</span><span class=n>vec3</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>normalize</span><span class=p>(</span><span class=n>glm</span><span class=o>::</span><span class=n>cross</span><span class=p>(</span><span class=n>forward</span><span class=p>,</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>vec3</span><span class=p>(</span><span class=mf>0.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>0.0f</span><span class=p>)));</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a><span class=w>    </span><span class=n>glm</span><span class=o>::</span><span class=n>vec3</span><span class=w> </span><span class=n>up</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>normalize</span><span class=p>(</span><span class=n>glm</span><span class=o>::</span><span class=n>cross</span><span class=p>(</span><span class=n>right</span><span class=p>,</span><span class=w> </span><span class=n>forward</span><span class=p>));</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a><span class=w>    </span><span class=n>Vec3</span><span class=w> </span><span class=n>eye</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>camera_pos_x</span><span class=p>,</span><span class=w> </span><span class=n>camera_pos_y</span><span class=p>,</span><span class=w> </span><span class=n>camera_pos_z</span><span class=p>};</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a><span class=w>    </span><span class=n>Vec3</span><span class=w> </span><span class=n>center</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a><span class=w>        </span><span class=n>camera_pos_x</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>forward</span><span class=p>.</span><span class=n>x</span><span class=p>,</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a><span class=w>        </span><span class=n>camera_pos_y</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>forward</span><span class=p>.</span><span class=n>y</span><span class=p>,</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a><span class=w>        </span><span class=n>camera_pos_z</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>forward</span><span class=p>.</span><span class=n>z</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a><span class=w>    </span><span class=p>};</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a><span class=w>    </span><span class=n>Vec3</span><span class=w> </span><span class=n>up_vec</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>up</span><span class=p>.</span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>up</span><span class=p>.</span><span class=n>y</span><span class=p>,</span><span class=w> </span><span class=n>up</span><span class=p>.</span><span class=n>z</span><span class=p>};</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a><span class=w>    </span><span class=n>ubo</span><span class=p>.</span><span class=n>view</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mat4_lookat</span><span class=p>(</span><span class=n>eye</span><span class=p>,</span><span class=w> </span><span class=n>center</span><span class=p>,</span><span class=w> </span><span class=n>up_vec</span><span class=p>);</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a><span class=w>    </span><span class=c1>// Projection matrix</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>fov</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>70.0f</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>3.14159f</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>180.0f</span><span class=p>;</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>aspect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>float</span><span class=p>)</span><span class=n>g_swapchainExtent</span><span class=p>.</span><span class=n>width</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=p>(</span><span class=kt>float</span><span class=p>)</span><span class=n>g_swapchainExtent</span><span class=p>.</span><span class=n>height</span><span class=p>;</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>nearPlane</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.1f</span><span class=p>;</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>farPlane</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>100.0f</span><span class=p>;</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a><span class=w>    </span><span class=n>ubo</span><span class=p>.</span><span class=n>proj</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mat4_perspective</span><span class=p>(</span><span class=n>fov</span><span class=p>,</span><span class=w> </span><span class=n>aspect</span><span class=p>,</span><span class=w> </span><span class=n>nearPlane</span><span class=p>,</span><span class=w> </span><span class=n>farPlane</span><span class=p>);</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a><span class=w>    </span><span class=n>ubo</span><span class=p>.</span><span class=n>proj</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>*=</span><span class=w> </span><span class=mf>-1.0f</span><span class=p>;</span><span class=w>  </span><span class=c1>// Vulkan clip space</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a><span class=w>    </span><span class=c1>// Update uniform buffer</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74 href=#__codelineno-0-74></a><span class=w>    </span><span class=kt>void</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>;</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75 href=#__codelineno-0-75></a><span class=w>    </span><span class=n>vkMapMemory</span><span class=p>(</span><span class=n>g_device</span><span class=p>,</span><span class=w> </span><span class=n>g_uniformBuffersMemory</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>ubo</span><span class=p>),</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>);</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76 href=#__codelineno-0-76></a><span class=w>    </span><span class=n>memcpy</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>ubo</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>ubo</span><span class=p>));</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77 href=#__codelineno-0-77></a><span class=w>    </span><span class=n>vkUnmapMemory</span><span class=p>(</span><span class=n>g_device</span><span class=p>,</span><span class=w> </span><span class=n>g_uniformBuffersMemory</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>]);</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78 href=#__codelineno-0-78></a>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79 href=#__codelineno-0-79></a><span class=w>    </span><span class=c1>// Bind descriptor set</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80 href=#__codelineno-0-80></a><span class=w>    </span><span class=n>vkCmdBindDescriptorSets</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=n>VK_PIPELINE_BIND_POINT_GRAPHICS</span><span class=p>,</span><span class=w> </span><span class=n>g_pipelineLayout</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>g_descriptorSets</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=k>nullptr</span><span class=p>);</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81 href=#__codelineno-0-81></a>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82 href=#__codelineno-0-82></a><span class=w>    </span><span class=c1>// Bind vertex buffer</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83 href=#__codelineno-0-83></a><span class=w>    </span><span class=n>VkBuffer</span><span class=w> </span><span class=n>vertexBuffers</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>g_fpsCubeVertexBuffer</span><span class=p>};</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84 href=#__codelineno-0-84></a><span class=w>    </span><span class=n>VkDeviceSize</span><span class=w> </span><span class=n>offsets</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85 href=#__codelineno-0-85></a><span class=w>    </span><span class=n>vkCmdBindVertexBuffers</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>vertexBuffers</span><span class=p>,</span><span class=w> </span><span class=n>offsets</span><span class=p>);</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86 href=#__codelineno-0-86></a>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87 href=#__codelineno-0-87></a><span class=w>    </span><span class=c1>// Bind index buffer</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88 href=#__codelineno-0-88></a><span class=w>    </span><span class=n>vkCmdBindIndexBuffer</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=n>g_fpsCubeIndexBuffer</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>VK_INDEX_TYPE_UINT16</span><span class=p>);</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89 href=#__codelineno-0-89></a>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90 href=#__codelineno-0-90></a><span class=w>    </span><span class=c1>// Draw cube</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91 href=#__codelineno-0-91></a><span class=w>    </span><span class=n>vkCmdDrawIndexed</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=n>g_fpsCubeIndexCount</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92 href=#__codelineno-0-92></a>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93 href=#__codelineno-0-93></a><span class=w>    </span><span class=c1>// ... render Neuroshell UI, end render pass, submit, present ...</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94 href=#__codelineno-0-94></a><span class=p>}</span>
</span></code></pre></div> <h3 id=working-spinning-cube-render-function-heidic_render_frame_cube>Working Spinning Cube Render Function (heidic_render_frame_cube)<a class=headerlink href=#working-spinning-cube-render-function-heidic_render_frame_cube title="Permanent link">&para;</a></h3> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1>// Line ~1884</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=k>extern</span><span class=w> </span><span class=s>&quot;C&quot;</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>heidic_render_frame_cube</span><span class=p>(</span><span class=n>GLFWwindow</span><span class=o>*</span><span class=w> </span><span class=n>window</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=c1>// ... same Vulkan frame setup ...</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>    </span><span class=c1>// Bind pipeline</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>    </span><span class=n>vkCmdBindPipeline</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=n>VK_PIPELINE_BIND_POINT_GRAPHICS</span><span class=p>,</span><span class=w> </span><span class=n>g_cubePipeline</span><span class=p>);</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>    </span><span class=c1>// Update uniform buffer</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>    </span><span class=n>UniformBufferObject</span><span class=w> </span><span class=n>ubo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>    </span><span class=c1>// Model matrix - rotate the cube</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>    </span><span class=n>Vec3</span><span class=w> </span><span class=n>axis</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>0.0f</span><span class=p>};</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>    </span><span class=n>ubo</span><span class=p>.</span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mat4_rotate</span><span class=p>(</span><span class=n>axis</span><span class=p>,</span><span class=w> </span><span class=n>g_cubeRotationAngle</span><span class=p>);</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>    </span><span class=c1>// View matrix - look at cube from above and to the side</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=w>    </span><span class=n>Vec3</span><span class=w> </span><span class=n>eye</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mf>3.0f</span><span class=p>,</span><span class=w> </span><span class=mf>3.0f</span><span class=p>,</span><span class=w> </span><span class=mf>3.0f</span><span class=p>};</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=w>    </span><span class=n>Vec3</span><span class=w> </span><span class=n>center</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mf>0.0f</span><span class=p>,</span><span class=w> </span><span class=mf>0.0f</span><span class=p>,</span><span class=w> </span><span class=mf>0.0f</span><span class=p>};</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=w>    </span><span class=n>Vec3</span><span class=w> </span><span class=n>up</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mf>0.0f</span><span class=p>,</span><span class=w> </span><span class=mf>1.0f</span><span class=p>,</span><span class=w> </span><span class=mf>0.0f</span><span class=p>};</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=w>    </span><span class=n>ubo</span><span class=p>.</span><span class=n>view</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mat4_lookat</span><span class=p>(</span><span class=n>eye</span><span class=p>,</span><span class=w> </span><span class=n>center</span><span class=p>,</span><span class=w> </span><span class=n>up</span><span class=p>);</span>
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a>
</span><span id=__span-1-21><a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a><span class=w>    </span><span class=c1>// Projection matrix</span>
</span><span id=__span-1-22><a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>fov</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>45.0f</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>3.14159f</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>180.0f</span><span class=p>;</span>
</span><span id=__span-1-23><a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>aspect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>float</span><span class=p>)</span><span class=n>g_swapchainExtent</span><span class=p>.</span><span class=n>width</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=p>(</span><span class=kt>float</span><span class=p>)</span><span class=n>g_swapchainExtent</span><span class=p>.</span><span class=n>height</span><span class=p>;</span>
</span><span id=__span-1-24><a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>nearPlane</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.1f</span><span class=p>;</span>
</span><span id=__span-1-25><a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>farPlane</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>100.0f</span><span class=p>;</span>
</span><span id=__span-1-26><a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a><span class=w>    </span><span class=n>ubo</span><span class=p>.</span><span class=n>proj</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mat4_perspective</span><span class=p>(</span><span class=n>fov</span><span class=p>,</span><span class=w> </span><span class=n>aspect</span><span class=p>,</span><span class=w> </span><span class=n>nearPlane</span><span class=p>,</span><span class=w> </span><span class=n>farPlane</span><span class=p>);</span>
</span><span id=__span-1-27><a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a><span class=w>    </span><span class=n>ubo</span><span class=p>.</span><span class=n>proj</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>*=</span><span class=w> </span><span class=mf>-1.0f</span><span class=p>;</span>
</span><span id=__span-1-28><a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a>
</span><span id=__span-1-29><a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a><span class=w>    </span><span class=c1>// Update uniform buffer (same code)</span>
</span><span id=__span-1-30><a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a><span class=w>    </span><span class=kt>void</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>;</span>
</span><span id=__span-1-31><a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a><span class=w>    </span><span class=n>vkMapMemory</span><span class=p>(</span><span class=n>g_device</span><span class=p>,</span><span class=w> </span><span class=n>g_uniformBuffersMemory</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>ubo</span><span class=p>),</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>);</span>
</span><span id=__span-1-32><a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a><span class=w>    </span><span class=n>memcpy</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>ubo</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>ubo</span><span class=p>));</span>
</span><span id=__span-1-33><a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a><span class=w>    </span><span class=n>vkUnmapMemory</span><span class=p>(</span><span class=n>g_device</span><span class=p>,</span><span class=w> </span><span class=n>g_uniformBuffersMemory</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>]);</span>
</span><span id=__span-1-34><a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a>
</span><span id=__span-1-35><a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a><span class=w>    </span><span class=c1>// Bind descriptor set (same)</span>
</span><span id=__span-1-36><a id=__codelineno-1-36 name=__codelineno-1-36 href=#__codelineno-1-36></a><span class=w>    </span><span class=n>vkCmdBindDescriptorSets</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=n>VK_PIPELINE_BIND_POINT_GRAPHICS</span><span class=p>,</span><span class=w> </span><span class=n>g_pipelineLayout</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>g_descriptorSets</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=k>nullptr</span><span class=p>);</span>
</span><span id=__span-1-37><a id=__codelineno-1-37 name=__codelineno-1-37 href=#__codelineno-1-37></a>
</span><span id=__span-1-38><a id=__codelineno-1-38 name=__codelineno-1-38 href=#__codelineno-1-38></a><span class=w>    </span><span class=c1>// Bind vertex buffer</span>
</span><span id=__span-1-39><a id=__codelineno-1-39 name=__codelineno-1-39 href=#__codelineno-1-39></a><span class=w>    </span><span class=n>VkBuffer</span><span class=w> </span><span class=n>vertexBuffers</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>g_cubeVertexBuffer</span><span class=p>};</span>
</span><span id=__span-1-40><a id=__codelineno-1-40 name=__codelineno-1-40 href=#__codelineno-1-40></a><span class=w>    </span><span class=n>VkDeviceSize</span><span class=w> </span><span class=n>offsets</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span><span id=__span-1-41><a id=__codelineno-1-41 name=__codelineno-1-41 href=#__codelineno-1-41></a><span class=w>    </span><span class=n>vkCmdBindVertexBuffers</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>vertexBuffers</span><span class=p>,</span><span class=w> </span><span class=n>offsets</span><span class=p>);</span>
</span><span id=__span-1-42><a id=__codelineno-1-42 name=__codelineno-1-42 href=#__codelineno-1-42></a>
</span><span id=__span-1-43><a id=__codelineno-1-43 name=__codelineno-1-43 href=#__codelineno-1-43></a><span class=w>    </span><span class=c1>// Bind index buffer</span>
</span><span id=__span-1-44><a id=__codelineno-1-44 name=__codelineno-1-44 href=#__codelineno-1-44></a><span class=w>    </span><span class=n>vkCmdBindIndexBuffer</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=n>g_cubeIndexBuffer</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>VK_INDEX_TYPE_UINT16</span><span class=p>);</span>
</span><span id=__span-1-45><a id=__codelineno-1-45 name=__codelineno-1-45 href=#__codelineno-1-45></a>
</span><span id=__span-1-46><a id=__codelineno-1-46 name=__codelineno-1-46 href=#__codelineno-1-46></a><span class=w>    </span><span class=c1>// Draw cube</span>
</span><span id=__span-1-47><a id=__codelineno-1-47 name=__codelineno-1-47 href=#__codelineno-1-47></a><span class=w>    </span><span class=n>vkCmdDrawIndexed</span><span class=p>(</span><span class=n>g_commandBuffers</span><span class=p>[</span><span class=n>imageIndex</span><span class=p>],</span><span class=w> </span><span class=n>g_cubeIndexCount</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>);</span>
</span><span id=__span-1-48><a id=__codelineno-1-48 name=__codelineno-1-48 href=#__codelineno-1-48></a>
</span><span id=__span-1-49><a id=__codelineno-1-49 name=__codelineno-1-49 href=#__codelineno-1-49></a><span class=w>    </span><span class=c1>// ... end render pass, submit, present ...</span>
</span><span id=__span-1-50><a id=__codelineno-1-50 name=__codelineno-1-50 href=#__codelineno-1-50></a><span class=p>}</span>
</span></code></pre></div> <h2 id=key-differences-between-working-and-broken-code>Key Differences Between Working and Broken Code<a class=headerlink href=#key-differences-between-working-and-broken-code title="Permanent link">&para;</a></h2> <h3 id=differences-found>Differences Found:<a class=headerlink href=#differences-found title="Permanent link">&para;</a></h3> <ol> <li><strong>View Matrix</strong>: FPS uses dynamic camera calculation, spinning cube uses fixed view</li> <li> <p><strong>Tried</strong>: Using exact same fixed view as spinning cube → Still broken</p> </li> <li> <p><strong>FOV</strong>: FPS uses 70°, spinning cube uses 45°</p> </li> <li> <p><strong>Tried</strong>: Using exact same 45° FOV → Still broken</p> </li> <li> <p><strong>Buffers</strong>: FPS uses <code>g_fpsCubeVertexBuffer</code>, spinning cube uses <code>g_cubeVertexBuffer</code></p> </li> <li> <p><strong>Tried</strong>: Using exact same <code>g_cubeVertexBuffer</code> → Still broken</p> </li> <li> <p><strong>Pipeline</strong>: FPS uses <code>g_fpsPipeline</code>, spinning cube uses <code>g_cubePipeline</code></p> </li> <li><strong>Tried</strong>: Using exact same <code>g_cubePipeline</code> → Still broken</li> </ol> <h2 id=pipeline-configuration>Pipeline Configuration<a class=headerlink href=#pipeline-configuration title="Permanent link">&para;</a></h2> <p>Both pipelines are configured identically: - Same vertex input (position + color, 2 attributes) - Same input assembly (triangle list) - Same viewport/scissor - Same rasterization (back face culling, counter-clockwise front face) - Same multisampling (1 sample) - Same depth stencil (depth test enabled, VK_COMPARE_OP_LESS) - Same color blending (no blending) - Same pipeline layout (<code>g_pipelineLayout</code>) - Same render pass (<code>g_renderPass</code>)</p> <h2 id=uniform-buffer-object-structure>Uniform Buffer Object Structure<a class=headerlink href=#uniform-buffer-object-structure title="Permanent link">&para;</a></h2> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=k>struct</span><span class=w> </span><span class=nc>UniformBufferObject</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>    </span><span class=n>glm</span><span class=o>::</span><span class=n>mat4</span><span class=w> </span><span class=n>model</span><span class=p>;</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=n>glm</span><span class=o>::</span><span class=n>mat4</span><span class=w> </span><span class=n>view</span><span class=p>;</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=n>glm</span><span class=o>::</span><span class=n>mat4</span><span class=w> </span><span class=n>proj</span><span class=p>;</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=p>};</span>
</span></code></pre></div> <h2 id=mat4-helper-functions>Mat4 Helper Functions<a class=headerlink href=#mat4-helper-functions title="Permanent link">&para;</a></h2> <div class="language-cpp highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1>// From stdlib/math.h</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=kr>inline</span><span class=w> </span><span class=n>Mat4</span><span class=w> </span><span class=nf>mat4_lookat</span><span class=p>(</span><span class=n>Vec3</span><span class=w> </span><span class=n>eye</span><span class=p>,</span><span class=w> </span><span class=n>Vec3</span><span class=w> </span><span class=n>center</span><span class=p>,</span><span class=w> </span><span class=n>Vec3</span><span class=w> </span><span class=n>up</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Mat4</span><span class=p>(</span><span class=n>glm</span><span class=o>::</span><span class=n>lookAt</span><span class=p>(</span><span class=n>glm</span><span class=o>::</span><span class=n>vec3</span><span class=p>(</span><span class=n>eye</span><span class=p>),</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>vec3</span><span class=p>(</span><span class=n>center</span><span class=p>),</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>vec3</span><span class=p>(</span><span class=n>up</span><span class=p>)));</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=p>}</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=kr>inline</span><span class=w> </span><span class=n>Mat4</span><span class=w> </span><span class=nf>mat4_perspective</span><span class=p>(</span><span class=kt>float</span><span class=w> </span><span class=n>fov_rad</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>aspect</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>near_plane</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>far_plane</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Mat4</span><span class=p>(</span><span class=n>glm</span><span class=o>::</span><span class=n>perspectiveRH_ZO</span><span class=p>(</span><span class=n>fov_rad</span><span class=p>,</span><span class=w> </span><span class=n>aspect</span><span class=p>,</span><span class=w> </span><span class=n>near_plane</span><span class=p>,</span><span class=w> </span><span class=n>far_plane</span><span class=p>));</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=p>}</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=k>struct</span><span class=w> </span><span class=nc>Mat4</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>    </span><span class=n>glm</span><span class=o>::</span><span class=n>mat4</span><span class=w> </span><span class=n>data</span><span class=p>;</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>m</span><span class=p>[</span><span class=mi>16</span><span class=p>];</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>    </span><span class=n>Mat4</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>mat4</span><span class=o>&amp;</span><span class=w> </span><span class=n>mat</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>data</span><span class=p>(</span><span class=n>mat</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>updateM</span><span class=p>();</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>    </span><span class=k>operator</span><span class=w> </span><span class=n>glm</span><span class=o>::</span><span class=n>mat4</span><span class=p>()</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>data</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>    </span><span class=c1>// ...</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=p>};</span>
</span></code></pre></div> <h2 id=observations>Observations<a class=headerlink href=#observations title="Permanent link">&para;</a></h2> <ol> <li><strong>Z-Fighting</strong>: All faces appear at the same depth, suggesting depth buffer isn't working OR all vertices are being transformed to the same depth</li> <li><strong>Flat Appearance</strong>: Cube looks flat, suggesting perspective projection might not be working</li> <li><strong>Both Pipelines Fail</strong>: Even using the exact same pipeline that works for spinning cube fails, suggesting the issue is NOT in pipeline creation</li> <li><strong>Same Buffers Fail</strong>: Even using the exact same vertex/index buffers that work for spinning cube fails, suggesting the issue is NOT in buffer data</li> </ol> <h2 id=hypotheses>Hypotheses<a class=headerlink href=#hypotheses title="Permanent link">&para;</a></h2> <ol> <li><strong>Uniform Buffer Not Updating</strong>: Maybe the uniform buffer isn't being updated correctly for the FPS renderer</li> <li><strong>Descriptor Set Issue</strong>: Maybe the descriptor set isn't bound correctly or points to wrong uniform buffer</li> <li><strong>Matrix Conversion Issue</strong>: Maybe the Mat4 to glm::mat4 conversion isn't working correctly in the FPS renderer context</li> <li><strong>Shader Issue</strong>: Maybe the shaders expect different uniform buffer layout or the shader modules are different</li> <li><strong>Render Pass State</strong>: Maybe something about the render pass state is different between the two renderers</li> <li><strong>Command Buffer State</strong>: Maybe the command buffer is in a bad state when FPS renderer runs</li> </ol> <h2 id=debugging-suggestions>Debugging Suggestions<a class=headerlink href=#debugging-suggestions title="Permanent link">&para;</a></h2> <ol> <li><strong>Add Debug Output</strong>: Print the actual matrix values being sent to the uniform buffer</li> <li><strong>Compare Shader Modules</strong>: Verify that <code>g_fpsVertShaderModule</code> and <code>g_cubeVertShaderModule</code> are identical</li> <li><strong>Check Descriptor Sets</strong>: Verify that <code>g_descriptorSets[imageIndex]</code> points to the correct uniform buffer</li> <li><strong>Verify Uniform Buffer Memory</strong>: Check that the uniform buffer memory is actually being written to</li> <li><strong>Compare Render Pass State</strong>: Verify that both renderers use the exact same render pass configuration</li> <li><strong>Check Command Buffer</strong>: Verify that the command buffer is properly reset and in correct state</li> <li><strong>Test with Fixed View</strong>: Try using the exact same view matrix calculation code from spinning cube (copy-paste, no modifications)</li> </ol> <h2 id=files-to-examine>Files to Examine<a class=headerlink href=#files-to-examine title="Permanent link">&para;</a></h2> <ol> <li><code>vulkan/eden_vulkan_helpers.cpp</code> - Main rendering code</li> <li><code>stdlib/math.h</code> - Mat4 helper functions</li> <li>Shader files: <code>vert_3d.spv</code>, <code>frag_3d.spv</code>, <code>vert_cube.spv</code>, <code>frag_cube.spv</code> (if available)</li> <li><code>ELECTROSCRIBE/PROJECTS/fps_camera_test/fps_camera_test.hd</code> - HEIDIC source code</li> </ol> <h2 id=environment>Environment<a class=headerlink href=#environment title="Permanent link">&para;</a></h2> <ul> <li><strong>OS</strong>: Windows 10</li> <li><strong>Compiler</strong>: MinGW-w64 (g++)</li> <li><strong>Graphics API</strong>: Vulkan</li> <li><strong>Language</strong>: C++17</li> <li><strong>Project</strong>: HEIDIC compiler + FPS camera test</li> </ul> <h2 id=next-steps-for-debugging>Next Steps for Debugging<a class=headerlink href=#next-steps-for-debugging title="Permanent link">&para;</a></h2> <ol> <li>Add matrix value printing to verify uniform buffer contents</li> <li>Verify shader modules are identical (compare byte-by-byte or use same shader files)</li> <li>Check if uniform buffer descriptor set binding is correct</li> <li>Verify render pass and framebuffer state</li> <li>Compare command buffer recording between working and broken renderers line-by-line</li> <li>Test with minimal changes: copy entire <code>heidic_render_frame_cube</code> function and only change the view matrix calculation</li> </ol> <hr> <p><strong>Status</strong>: Issue persists after extensive debugging attempts. All obvious differences between working and broken code have been eliminated, yet the problem remains. The issue appears to be subtle and may be related to Vulkan state management, uniform buffer updates, or shader compilation differences.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 HEIDIC Project </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/yourusername/heidic target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.annotate", "content.code.copy"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../assets/javascripts/bundle.e71a0d61.min.js></script> </body> </html>